---
title: "Statistical Data Analysis of Student Goals"
author: Mateusz Zaremba
date: November 4, 2019
output: 
  pdf_document:
    toc: true
    toc_depth: 2
    number_sections: true
    fig_caption: true
    df_print: kable
    highlight: tango
    citation_package: natbib
    keep_tex: false
fontzise: 11pt
geometry: margin=1.5in
documentclass: article
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, error = FALSE, tidy = FALSE, cache = FALSE, fig.cap = "...")
```

```{r}
# load external script
source("source/DataManipulation.R")
```

# Abstract
*This should be a very brief explanation of your research paper (around 150 words). It normally includes information about the issue, why you are interested in that issue, your method/model, analysis results, discussions and conclusions.*

This paper analyses the data gathered from surveying 625 undergraduate students. The authors of the survey tried to prove two hypothesis: 1) During students' junior years, they tend to primarily focus on getting good grades while during their senior years, the focus shifts towards a deep-understanding of the subject and 2) students' enjoyment and interest tends to deteriorate as they progress through their studies. It is not obvious why this might be the case and if the student's sex or studied subject has any bearing. This is why the survey has 15 questions and probes 7 assessment categories. Each category consists of 3 to 1 questions and because the order of the questions is randomised, the student should not know the categories nor notice any patterns.

The data manipulation was done using R and tidywerse packages. A full analysis will be presented, including data: preparation, analysis, exploration and interpretation; calculation of confidence interval for a proportion, interpretation of the results using different kinds of graphs and an explanation of the methods used.

# Introduction
*This section should explain the topic, why it is important, and how you approach the issue*

It is interesting how undergraduate students' goals change through-out their studies. They often experince various syndroms like: burnout, impostour, disheartening or even attempt a suicide. A Harvard graduate, Alex Chang, in his TEDx talk titled ["The Unspoken Reality Behind the Harvard Gates"](https://www.youtube.com/watch?v=WzP7oDCciGI) speaks about the pressure of gettings the best grades; how he was called for a jasmine tea to his tutor and asked if he couldn't give it his all, while he already was doing the best he could. He also recalls one tragic night when he and his roommates were woke up at 4am, to be informed that one of his friend has taken his own life.

Becasue this paper is going to be talking about student's course enjoyment, expectations and his or her focus on grades vs. understanding I would liketo give it another, less visible shade for there might be a lot more to say about a student who is at the bottom of the scale. It was assumed that a student, who might be at risk of developing mental health problems, would be someone who: is not enjoying the course, finds it not interesting but still primarly aims to perform better than others, and is lead by the fear of performing poorly. We will try to identify such students, calculate the confidence-interval-for-a-proportion of finding them, and test the hypotheses.

# Data
*Explain your dataset and how the was data is collected – e.g. your sampling strategy or information given by the project information.* 
The data we will be analysing was originally sourced from *Elliot, A. J. and McGregor, H. A. (2001). A 2 x 2 achievement-goal framework. Journal of Personality and Social Psychology, 80, 3, 501-519*.

## Collection
The data was already collected but my own survey results were added to the data set.

## Initialising
The data was converted from the original `.xlsx` format to `.csv` using *Microsoft Excel for Mac* and then it was loaded to *R* script using the *tidyverse* package - [*readr*](https://readr.tidyverse.org/index.html]).

The initial number of students was also saved in a variable for later calcuations.

This is how the data looked like after loading it into the *R* script and before cleaning:

```{r}
studentGoalsEg <- createExampleTable(StudentGoalsData, 6, 9, 1, 6, 16, 19)
studentGoalsEg
```

## Cleansing
First, the *seq* column was dropped since it does not serve any purpose. Second, rows with empty cells were dropped because they could falsify the results.

## Coding
The following coding informations was applied to the data:

| Subject | Sex | Code |
| ------- | ---- | --- |
| Management | Male | 1 |
| Law | Female | 2
| Tourism | - | 3 |
| General Economics  | - | 4 |
| Accounting  | - | 5 |
| Statistics | - | 6 |

E.g., the code for *Male* was *1*, so the cells in the *sex* column containing *1* were replaced with a *Male* string; the code for *General Economics* was *4*, so the cells in the *subject* column containing *4* were replaced with a *General Economics* string. This is how the *sex* and *subject* columns looked like after applying the coding information:

```{r}
mean_dat[6:9,3:4]
```

## Assessment Categories
The survey's instructions provided 7 assessment categories and their appropriate questions. You can see these informations below with added  labeling and interpretation.

Category | Label | Interpretation | Question |
-------- | ----- | -------------- | -------- |
Performance Approach | M1 | Importance of doing better than others |1, 2, 3 |
Performance Avoidance | M2 | Motivation based on the fear of performing poorly | 4, 5, 6 |
Mastery approach | M3 | Students' grade-orientation focus | 7, 8, 9 |
Mastery avoidance | M4 | Students' fear of not mastering the course | 10, 11, 12 |
Interest | IR | Student expects the course to be interesting | 13 |
Enjoyment | EJ | Student expects the course to be enjoyable | 14 |
Importance focus | MG | Students' importance focus on understanding vs. grades | 15 |
Table: Interpretation table

## Derandomization and Renaming
Random order (6, 12, 11, 1, 7, 2, 10, 8, 5, 3, 9, 4) was given to use in the survey's instructions. This meant, e.g., *question 6* from the *Performance Avoidance* category is numbered *1* in the survey and in the data set; *question 12* from the *Mastery avoidance* category is numbered *2* in the survey and in the set; and so on. 

The column naming changed in the process: ***q****1* became ***Q****6*, changing lower case ***q*** to upper case ***Q*** as well as the number of the question.

*Table 4* inlustrates the entire process and assigns questions to their appropriate categories:

| |
| - | - | - | - | - | - | - | - | - | - | - | - | - |
Data set order | q1 | q2 | q3 | q4 | q5 | q6 | q7 | q8 | q9 | q10 | q11 | q12 |
Survey order | Q6 | Q12 | Q11 | Q1 | Q7 | Q2 | Q10 | Q8 | Q5 | Q3 | Q9 | Q4 |
Table: In the survey, questions from 1 to 12 were derandomized and renamed

Questions 13, 14 and 15 - which were in fact, hypotheses testing questions and *Interest*, *Enjoyment*, *Importance focus* assessment-categories accordingly - kept the same order in the survey and in the data set, so they were only renamed for easier data manipulation:

| Previous column name | New column name |
| - | - |
| interest | IG |
| enjoy | EJ |
| mastgrad | MG |

## Clean Data
This is how the data looked like after cleaning:

```{r}
meanTableEg <- createExampleTable(mean_dat, 6, 9, 1, 6, 15, 19)
meanTableEg
```

## Visual Exploration
The means from *M1*, *M2*, *M3* and *M4* assessment categories were set on basis of year of study, sex and subject; data smoothing was applied in attempt to capture any important patterns.

### M1 - Performance Approach
```{r}
# M1
# Plot mean results of performance approach questions
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(mean_dat$year, mean_dat$M1))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = sex, shape = subject))
# smoothing
s <- l + geom_smooth(method = loess, formula = y ~ x, se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "M1",
  title = "Performance Approach set on basis of: year of study, sex and subject.",
  subtitle = "How important it is to students to do better than others?",
  x = "Year (1-4)",
  y = "Answer: 1 (Low) - 7 (High)",
  colour = "Sex",
  shape = "Subject"
)
```

### M2 - Performance Avoidance
```{r}
# M2
# Plot mean results of performance avoidance
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$M2))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = sex, shape = subject))
# smoothing
s <- l + geom_smooth(method = loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "M2",
  title = "Performance Avoidance set on basis of: year of study, sex and subject.",
  subtitle = "How motivated are students by fear of performing poorly?",
  x = "Year: 1 - 4",
  y = "Answer: 1 (Low) - 7 (High)",
  colour = "Sex",
  shape = "Subject"
)
```


### M3 - Mastery approach
```{r}
# M3
# Plot mean results of mastery approach questions
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$M3))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = sex, shape = subject))
# smoothing
s <- l + geom_smooth(method = stats::loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "M3",
  title = "Mastery approach set on basis of: year of study, sex and subject.",
  subtitle = "Students' grade-orientation focus",
  x = "Year: 1 - 4",
  y = "Answer: 1 (Low) - 7 (High)",
  colour = "Sex",
  shape = "Subject"
)

# M4
# Plot mean results of mastery avoidance questions
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$M4))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = sex, shape = subject))
# smoothing
s <- l + geom_smooth(method = stats::loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "M4",
  title = "Mastery avoidance set on basis of: year of study, sex and subject.",
  subtitle = "Students' fear of not mastering the course.",
  x = "Year: 1 - 4",
  y = "Answer: 1 (Low) - 7 (High)",
  colour = "Sex",
  shape = "Subject"
)
```

# Methodology
*This section explains the statistical methods and/or your model. It is also a common practice to present the statistical model structure (i.e. equation) here as well.*

The data was manipulated unsing `R` programming language and `tidyverse` packages:

- [`ggplot2`](https://ggplot2.tidyverse.org/) - data visualisation
- [`dplyr`](https://dplyr.tidyverse.org/) - data manipulation
- [`tibble`](https://tibble.tidyverse.org/) - data reimagining
- [`readr`](https://readr.tidyverse.org/) - data reading
- [`tidyr`](https://tidyr.tidyverse.org/) - data cleaning
- [`purrr`](https://purrr.tidyverse.org/) - syntax simplification

Around 625 students were surveyed. They answered on a 7-level scale; 1 meaning the student felt the statement asked in the quesion is 'Not true of him/her' and 7 meaning the student felt it was 'Very true of him/her'. See the table below for a graphical explanation:

 | | | | | | | |
- | - | - | - | - | - | - | - | -
Not true of me | 1 | 2 | 3 | 4 | 5 | 6 | 7 | Very true of me

## Mean
Apart from *Interest*, *Enjoyment* and *Importance focus* categories, all other consisted of 3 questions. For this reason, the assessment-categories' means were computed and saved for each individual student.

This resulted in 4 extra columns added to the original data set. An example of these can be seen below:
```{r}
dat_tibble[1:5, 20:23]
```

### Grades vs. Understanding
```{r}
# 1) During students’ junior years, they tend to primarily focus on getting good grades while during their senior years, the focus shifts towards a deep-understanding of the subject and. 

# Plot set on basis of the student's sex.
# Plot mean results of (Primarly understanding/Equal Importance/Primarly grades)scale 
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$MG))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = sex))
# smoothing
s <- l + geom_smooth(method = stats::loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "MG",
  title = "Student's importance scale between understanding and grades set on basis of:
different years of study, sexes and subjects.",
  subtitle = "Scale: Primarly understanding (1) / Equal Importance (4) / Primarly grades (7)",
  x = "Year (1-4)",
  y = "Scale: 1 (Understanding) - 4 (Equal) - 7 (Grades)",
  colour = "Sex"
)

# Plot set on basis of the student's subject.
# Plot mean results of (Primarly understanding/Equal Importance/Primarly grades)scale 
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$MG))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = subject))
# smoothing
s <- l + geom_smooth(method = stats::loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "MG",
  title = "Student's importance scale between understanding and grades set on basis of:
different years of study, sexes and subjects.",
  subtitle = "Scale: Primarly understanding (1) / Equal Importance (4) / Primarly grades (7)",
  x = "Year (1-4)",
  y = "Scale: 1 (Understanding) - 4 (Equal) - 7 (Grades)",
  colour = "Subject"
)
```

### Interest
```{r}
# 2) students’ enjoyment and interest tends to deteriorate as they progress through their studies. 
# It is not obvious why this mightbe the case and if the student’s sex or studied subject has any bearing

# interest
# Plot set on basis of the student's sex.
# Plot mean results of course interestedness expectations questions
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$IR))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = sex))
# smoothing
s <- l + geom_smooth(method = stats::loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "IR",
  title = "Student's course interestedness expectations set on basis of:
different years of study, sexes and subjects.",
  subtitle = "Student response: \'I expect my courses this semester to be very interesting\'",
  x = "Year (1-4)",
  y = "Expectations: 1 (Low) - 7 (High)",
  colour = "Sex"
)

# interest
# Plot set on basis of the student's subject
# Plot mean results of course interestedness expectations questions
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$IR))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = subject))
# smoothing
s <- l + geom_smooth(method = stats::loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "IR",
  title = "Student's course interestedness expectations set on basis of:
different years of study, sexes and subjects.",
  subtitle = "Student response: \'I expect my courses this semester to be very interesting\'",
  x = "Year (1-4)",
  y = "Expectations: 1 (Low) - 7 (High)",
  colour = "Subject"
)
```

### Enjoyment
```{r}
# enjoy
# Plot set on basis of the student's sex.
# Plot mean results of course interestedness expectations questions
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$EJ))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = sex))
# smoothing
s <- l + geom_smooth(method = stats::loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "EJ",
 title = "Student's course enjoyment expectations set on basis of:
different years of study, sexes and subjects.",
  subtitle = "Student response: \'I expect my courses this semester to be very enjoyable\'",
  x = "Year (1-4)",
  y = "Expectations: 1 (Low) - 7 (High)",
  colour = "Sex"
)

# enjoy
# Plot set on basis of the student's subject.
# Plot mean results of course enjoyment expectations questions 
# for all students with relation to student's year, sex and subject
# data
d <- ggplot(data = dat, aes(year, mean_dat$EJ))
# mapping data (use "jitter" to improve the graph and avoid gridding)
l <- d + geom_jitter(aes(colour = subject))
# smoothing
s <- l + geom_smooth(method = stats::loess, formula = y ~ log(x), se = TRUE)
# adding theme
t <- s + theme_grey()
# adding colouring
c <- t
# adding labels
c + labs(
  tag = "EJ",
  title = "Student's course enjoyment expectations set on basis of:
different years of study, sexes and subjects.",
  subtitle = "Student response: \'I expect my courses this semester to be very enjoyable\'",
  x = "Year (1-4)",
  y = "Expectations: 1 (Low) - 7 (High)",
  colour = "Subject"
)
```

## Confidence Interval for a Proportion
### Finding Students at Risk
To find out if there are any students at risk the arbitraty criteria was assumed:

- *Performace Approach* $\geq$ 6
- *Performace Avoidance* $\geq$ 6
- *Interest* $\leq$ 2
- *Enjoyment* $\leq$ 2
- *Importance focus* $\geq$ 4


```{r}
mm2[,c("age", "sex", "subject", "M1", "M2", "IR", "EJ", "MG")]
```

Here we can see, there are 2 students who are not enjoying their course nor find it interesting but their main focus remains on doing better than others and avoiding performing poorly with a main or netural focus on grades. It was assumed that such students might be at risk of developing mental health problems.

### Equations

$$ \hat{p} = \frac{x}{n} = \frac{events}{trials} $$

$$ \hat{p} \pm Z \sqrt{\frac{\hat{p}(1 - \hat{p})}{n}} $$

### Calculations
Calculating a 95% confidence interval for the student-at-risk population proportion.

$$ \hat{p} = \frac{2}{625} = 0.0032 $$

$$ Z = 1.96  $$

$$ \hat{p} \pm Z = 0.0032 \pm 1.96 \sqrt{\frac{{0.0032}(1 - {0.0032})}{625}} = 0.0032 \pm 0.0044 $$

The upper confidence interval for a proportion is `r ci_up[,]`, and the lower is `r ci_low[,]`, which gives us a confidence interval, for proportion of finding a student-at-risk as: CI = (0.00762, -0.00122). This mean we could say with 95% confidence the percentage of the times we should expect to find a student at risk is between 0.7% and 0%.

# Results
*Present both your informal and formal analyses.*
We we are going to find out if, and how many students are at risk of developing mental health issues and test the hypothesis 1) and 2) set on basis of sex and subject.


# Conclusion / Discussion
*You need to conclude your project, discuss the results, discuss any reservations that you have about the study and list any future work.*

The hypothese turned out to be true/false?

Looking at data (see Table 11), we can tell there are in fact 2 students who might be at risk; they are both 18-year-old females *General Economic* students.

This might not seems like a lot but we have the actual data to back it up. We know that there are 2 students who might be at risk of developing mental health problems: they are both female, aged 18 years old and study general economics at their sophmore year. Wheter this data should be used directly to try to find these students is a different debate. What could be definietly done is try to announce this fact that there have been found students who might be at risk and that there is help available. Most universities offer counceling for students but the problem is to have already troubled and lonely students reach out for help. Maybe a university could develop their own programmes for sutdents which they can use to self-diagnose and if the system would detect that they might be experiencing mental health problems they could direct them towards a councelor at their univeristy. Such tests already exists but the reason why I think they should be university specific is for the fact that it makes the student feels that their university cares about their mental health and they do not need to feel ashamed to ask for help becasue it was their home institution who has made the first step. 

**Univerity should be the one reaching out, not the other way around.**

so, what conclusions do you have bruh? Could analyse AGE
